
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Bond Bio: The Liberty and Victory Loans issued to fund WW1 &#8212; 2024 Summer Fiscal History Team Bond-Bios</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ww1_vic_lib';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Bond List" href="5-20s%20bonds%20%281%29.html" />
    <link rel="prev" title="Bond Biography: The Currency Sixes" href="BondBios%20-%20The%20Currency%20Sixes.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
  
    <p class="title logo__title">2024 Summer Fiscal History Team Bond-Bios</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to the Bond Bios Book
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Bond Bios</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Final%20Louisiana%20Purchase%20Bonds%20Notebook.html">Bond Biography: Louisiana Purchase</a></li>
<li class="toctree-l1"><a class="reference internal" href="war_1812.html">Bonds and Treasury Notes of the War of 1812</a></li>


<li class="toctree-l1"><a class="reference internal" href="BondBios%20-%20The%20Currency%20Sixes.html">Bond Biography: The Currency Sixes</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Bond Bio: The Liberty and Victory Loans issued to fund WW1</a></li>

<li class="toctree-l1"><a class="reference internal" href="5-20s%20bonds%20%281%29.html">Bond List</a></li>










</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/ww1_vic_lib.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Bond Bio: The Liberty and Victory Loans issued to fund WW1</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Bond Bio: The Liberty and Victory Loans issued to fund WW1</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-that-will-be-answered-for-each-bond">Questions that will be answered for each bond:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#liberty-victory-loans">Liberty &amp; Victory Loans</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#st-liberty-loan-of-1917">1st Liberty Loan of 1917</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nd-liberty-loan">2nd Liberty Loan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rd-liberty-loan">3rd Liberty Loan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#th-liberty-loan">4th Liberty Loan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#victory-loans">Victory Loans</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#price-drop-in-1920-1921">Price Drop in 1920-1921</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#events-potentially-leading-to-price-drop">Events potentially leading to price drop:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#supplementary-materials">Supplementary Materials</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#figures">Figures</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe-format-notes">Dataframe format notes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bondlist">BondList</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bondquant-and-bondprice">BondQuant and BondPrice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#works-cited">Works Cited:</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="bond-bio-the-liberty-and-victory-loans-issued-to-fund-ww1">
<h1>Bond Bio: The Liberty and Victory Loans issued to fund WW1<a class="headerlink" href="#bond-bio-the-liberty-and-victory-loans-issued-to-fund-ww1" title="Link to this heading">#</a></h1>
<p>Team members: Elan Wang, Liam Loughead</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">calendar</span> <span class="k">as</span> <span class="nn">cal</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ion</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">mcolors</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="c1">#%matplotlib ipympl</span>
</pre></div>
</div>
</div>
</div>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<section id="questions-that-will-be-answered-for-each-bond">
<h3>Questions that will be answered for each bond:<a class="headerlink" href="#questions-that-will-be-answered-for-each-bond" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>What were the features of the bond?</p></li>
<li><p>Why the bond was issued?</p></li>
<li><p>How much was authorized and how much was sold?</p></li>
<li><p>At what price was the bond originally sold and what was the price history on the secondary market?</p></li>
<li><p>When was the bond redeemed?</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Bondh5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;data/BondDF.h5&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="n">BondList</span> <span class="o">=</span> <span class="n">Bondh5</span><span class="p">[</span><span class="s2">&quot;BondList&quot;</span><span class="p">]</span>
<span class="n">BondQuant</span> <span class="o">=</span> <span class="n">Bondh5</span><span class="p">[</span><span class="s2">&quot;BondQuant&quot;</span><span class="p">]</span>
<span class="n">BondPrice</span> <span class="o">=</span> <span class="n">Bondh5</span><span class="p">[</span><span class="s2">&quot;BondPrice&quot;</span><span class="p">]</span>
<span class="n">Bondh5</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">Bondh5</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">HDFStore</span><span class="p">(</span><span class="s2">&quot;data/BondDF.h5&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">BondList</span> <span class="o">=</span> <span class="n">Bondh5</span><span class="p">[</span><span class="s2">&quot;BondList&quot;</span><span class="p">]</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">BondQuant</span> <span class="o">=</span> <span class="n">Bondh5</span><span class="p">[</span><span class="s2">&quot;BondQuant&quot;</span><span class="p">]</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/pandas/io/pytables.py:566,</span> in <span class="ni">HDFStore.__init__</span><span class="nt">(self, path, mode, complevel, complib, fletcher32, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">563</span> <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">564</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;format is not a defined argument for HDFStore&quot;</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">566</span> <span class="n">tables</span> <span class="o">=</span> <span class="n">import_optional_dependency</span><span class="p">(</span><span class="s2">&quot;tables&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">568</span> <span class="k">if</span> <span class="n">complib</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">complib</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tables</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">all_complibs</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">569</span>     <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">570</span>         <span class="sa">f</span><span class="s2">&quot;complib only supports </span><span class="si">{</span><span class="n">tables</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">all_complibs</span><span class="si">}</span><span class="s2"> compression.&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">571</span>     <span class="p">)</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/pandas/compat/_optional.py:135,</span> in <span class="ni">import_optional_dependency</span><span class="nt">(name, extra, errors, min_version)</span>
<span class="g g-Whitespace">    </span><span class="mi">130</span> <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
<span class="g g-Whitespace">    </span><span class="mi">131</span>     <span class="sa">f</span><span class="s2">&quot;Missing optional dependency &#39;</span><span class="si">{</span><span class="n">install_name</span><span class="si">}</span><span class="s2">&#39;. </span><span class="si">{</span><span class="n">extra</span><span class="si">}</span><span class="s2"> &quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">132</span>     <span class="sa">f</span><span class="s2">&quot;Use pip or conda to install </span><span class="si">{</span><span class="n">install_name</span><span class="si">}</span><span class="s2">.&quot;</span>
<span class="g g-Whitespace">    </span><span class="mi">133</span> <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">134</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">135</span>     <span class="n">module</span> <span class="o">=</span> <span class="n">importlib</span><span class="o">.</span><span class="n">import_module</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">136</span> <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">137</span>     <span class="k">if</span> <span class="n">errors</span> <span class="o">==</span> <span class="s2">&quot;raise&quot;</span><span class="p">:</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/importlib/__init__.py:90,</span> in <span class="ni">import_module</span><span class="nt">(name, package)</span>
<span class="g g-Whitespace">     </span><span class="mi">88</span>             <span class="k">break</span>
<span class="g g-Whitespace">     </span><span class="mi">89</span>         <span class="n">level</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="ne">---&gt; </span><span class="mi">90</span> <span class="k">return</span> <span class="n">_bootstrap</span><span class="o">.</span><span class="n">_gcd_import</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="n">level</span><span class="p">:],</span> <span class="n">package</span><span class="p">,</span> <span class="n">level</span><span class="p">)</span>

<span class="nn">File &lt;frozen importlib._bootstrap&gt;:1387,</span> in <span class="ni">_gcd_import</span><span class="nt">(name, package, level)</span>

<span class="nn">File &lt;frozen importlib._bootstrap&gt;:1360,</span> in <span class="ni">_find_and_load</span><span class="nt">(name, import_)</span>

<span class="nn">File &lt;frozen importlib._bootstrap&gt;:1331,</span> in <span class="ni">_find_and_load_unlocked</span><span class="nt">(name, import_)</span>

<span class="nn">File &lt;frozen importlib._bootstrap&gt;:935,</span> in <span class="ni">_load_unlocked</span><span class="nt">(spec)</span>

<span class="nn">File &lt;frozen importlib._bootstrap_external&gt;:995,</span> in <span class="ni">exec_module</span><span class="nt">(self, module)</span>

<span class="nn">File &lt;frozen importlib._bootstrap&gt;:488,</span> in <span class="ni">_call_with_frames_removed</span><span class="nt">(f, *args, **kwds)</span>

<span class="n">File</span> <span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Python</span><span class="o">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span><span class="mf">3.12</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python3</span><span class="mf">.12</span><span class="o">/</span><span class="n">site</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span><span class="n">tables</span><span class="o">/</span><span class="fm">__init__</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="mi">44</span>
<span class="g g-Whitespace">     </span><span class="mi">40</span>     <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Blosc2 library not found. &quot;</span>
<span class="g g-Whitespace">     </span><span class="mi">41</span>                        <span class="sa">f</span><span class="s2">&quot;I looked for </span><span class="se">\&quot;</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">blosc2_search_paths</span><span class="p">)</span><span class="si">}</span><span class="se">\&quot;</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">43</span> <span class="c1"># Necessary imports to get versions stored on the cython extension</span>
<span class="ne">---&gt; </span><span class="mi">44</span> <span class="kn">from</span> <span class="nn">.utilsextension</span> <span class="kn">import</span> <span class="n">get_hdf5_version</span> <span class="k">as</span> <span class="n">_get_hdf5_version</span>
<span class="g g-Whitespace">     </span><span class="mi">46</span> <span class="kn">from</span> <span class="nn">._version</span> <span class="kn">import</span> <span class="n">__version__</span>
<span class="g g-Whitespace">     </span><span class="mi">48</span> <span class="n">hdf5_version</span> <span class="o">=</span> <span class="n">_get_hdf5_version</span><span class="p">()</span>

<span class="nn">File /Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/site-packages/tables/utilsextension.pyx:1,</span> in <span class="ni">init tables.utilsextension</span><span class="nt">()</span>

<span class="ne">ValueError</span>: numpy.dtype size changed, may indicate binary incompatibility. Expected 96 from C header, got 88 from PyObject
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Helper functions</span>

<span class="k">def</span> <span class="nf">get_cf_as_string</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Takes a row from the BondList frame and returns the a string indicating the month which the bond</span>
<span class="sd">    is scheduled.</span>
<span class="sd">    &quot;&quot;&quot;</span>
  
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;CF</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">cal</span><span class="o">.</span><span class="n">month_name</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;Ambiguous&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="s2">&quot;Ambiguous&quot;</span>
    <span class="k">return</span> <span class="s2">&quot;N/A&quot;</span>

<span class="k">def</span> <span class="nf">is_nan</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Utility to check if a value is nan</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">str_value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">str_value</span> <span class="o">==</span> <span class="s2">&quot;nan&quot;</span> <span class="ow">or</span> <span class="n">str_value</span> <span class="o">==</span> <span class="s2">&quot;NaT&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="liberty-victory-loans">
<h2>Liberty &amp; Victory Loans<a class="headerlink" href="#liberty-victory-loans" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.federalreservehistory.org/essays/liberty-bonds#footnote1">This concise article</a> gives a summary of the bonds</p></li>
<li><p>Bonds are conveniently classified under the level three category “Liberty Loan”</p></li>
<li><p>These bonds were used to fund World War I</p></li>
<li><p>The below cell isolates and prints information about the liberty loans from the BondList dataframe</p></li>
<li><p>Note: These are all par bonds, meaning their original price is equal to their face value.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Change the pandas float format when using the str() function - removes extra 0s and makes</span>
<span class="c1">#the output more readable</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;$</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>

<span class="c1">#Define the liberty loans sub-dataframe</span>
<span class="n">BondList</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;First Issue Date&quot;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">liberty_loans</span> <span class="o">=</span> <span class="n">BondList</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">BondList</span><span class="p">[</span><span class="s1">&#39;Category L3&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Liberty Loan&quot;</span><span class="p">)]</span>
<span class="n">BondList</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

<span class="c1">#Define a helper function to summarize a bond</span>
<span class="k">def</span> <span class="nf">summarize_bond</span><span class="p">(</span><span class="n">bond_row</span><span class="p">):</span>
  <span class="n">noi</span> <span class="o">=</span> <span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span> <span class="c1"># noi：</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Bond #</span><span class="si">{</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;Issue L1 ID&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">noi</span><span class="si">}{</span><span class="s1">&#39;, issued &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">str</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;First Issue Date&#39;</span><span class="p">])</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">is_nan</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;First Issue Date&#39;</span><span class="p">])</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">is_nan</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Term Of Loan&quot;</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   No further information&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bond_row</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Term: </span><span class="si">{</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;Term Of Loan&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, Redeemable: </span><span class="si">{</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;Redeemable After Date&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, Payable: </span><span class="si">{</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;Payable Date&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;   Coupon: </span><span class="si">{</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;Coupon Rate&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, Frequency: </span><span class="si">{</span><span class="n">bond_row</span><span class="p">[</span><span class="s1">&#39;Coupons Per Year&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">/year, Scheduled Month: </span><span class="si">{</span><span class="n">get_cf_as_string</span><span class="p">(</span><span class="n">bond_row</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---------------------------------------------------&quot;</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">bond_row</span>

<span class="c1">#Uncomment to print a summary of all bonds labeled &quot;Liberty Loan&quot;</span>
<span class="c1">#liberty_loans.apply(summarize_bond, axis=1)</span>
<span class="c1">#print(&quot;Done&quot;) #Print Done so the cell output does not include the dataframe snippet</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">6</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;$</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="c1">#Define the liberty loans sub-dataframe</span>
<span class="ne">----&gt; </span><span class="mi">6</span> <span class="n">BondList</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;First Issue Date&quot;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span> <span class="n">liberty_loans</span> <span class="o">=</span> <span class="n">BondList</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">BondList</span><span class="p">[</span><span class="s1">&#39;Category L3&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Liberty Loan&quot;</span><span class="p">)]</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="n">BondList</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;BondList&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Helper formatting function for large sums of money</span>
<span class="k">def</span> <span class="nf">big_numbers_format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="n">strx</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">1e9</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">strx</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">strx</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2">b&quot;</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mf">1e8</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">strx</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">.</span><span class="si">{</span><span class="n">strx</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">m&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">strx</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="k">def</span> <span class="nf">big_dollars_format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;$</span><span class="si">{</span><span class="n">big_numbers_format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kc">None</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1">#BondQuant_Transposed is months x bond, as opposed to bond x months</span>
<span class="n">BondQuant_Transposed</span> <span class="o">=</span> <span class="n">BondQuant</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="c1">#Do the same for BondPrice</span>
<span class="n">BondPrice_Transposed</span> <span class="o">=</span> <span class="n">BondPrice</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

<span class="c1">#define some important dates for context</span>
<span class="n">graph_start_ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;1917-1-1&quot;</span><span class="p">)</span> <span class="c1">#Starting the graph from here gives it a nice left margin</span>
<span class="n">join_ts</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;1917-04-04&quot;</span><span class="p">)</span>
<span class="n">armistice_ts</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;1918-11-11&quot;</span><span class="p">)</span>
<span class="n">depression_begin_ts</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;1920-01-01&quot;</span><span class="p">)</span>
<span class="n">depression_end_ts</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="s2">&quot;1921-07-01&quot;</span><span class="p">)</span>

<span class="c1">#Helper function to format axes correctly</span>
<span class="k">def</span> <span class="nf">format_and_annotate_ax</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">closest_date</span><span class="p">):</span>
    <span class="c1">#Sets the right limit to the &quot;closest&quot; (to today) date plus 2 months to give it a nice right margin</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="n">graph_start_ts</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="n">closest_date</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">DateOffset</span><span class="p">(</span><span class="n">months</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="n">BondList</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">bond_ids</span><span class="p">],</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.65</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">get_legend</span><span class="p">()</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Color, Bond ID&quot;</span><span class="p">)</span>

    <span class="n">war_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ed7784&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;US time in WW1&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">xmin</span><span class="o">=</span><span class="n">join_ts</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">armistice_ts</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ed7784&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
    <span class="n">depression_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ad2df7&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Depression&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">xmin</span><span class="o">=</span><span class="n">depression_begin_ts</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">depression_end_ts</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ad2df7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
    <span class="n">twinx</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
    <span class="n">twinx</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">war_patch</span><span class="p">,</span> <span class="n">depression_patch</span><span class="p">],</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Events&quot;</span><span class="p">)</span>
    <span class="n">twinx</span><span class="o">.</span><span class="n">set_axis_off</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="n">line</span> <span class="mi">14</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span>     <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;$</span><span class="si">{</span><span class="n">big_numbers_format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kc">None</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span> <span class="c1">#BondQuant_Transposed is months x bond, as opposed to bond x months</span>
<span class="ne">---&gt; </span><span class="mi">14</span> <span class="n">BondQuant_Transposed</span> <span class="o">=</span> <span class="n">BondQuant</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span> <span class="c1">#Do the same for BondPrice</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> <span class="n">BondPrice_Transposed</span> <span class="o">=</span> <span class="n">BondPrice</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>

<span class="ne">NameError</span>: name &#39;BondQuant&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Taking a list of bond IDs, create a graph of their quantities in the Public Holdings category</span>
<span class="c1">#Creates a new figure for each graph</span>
<span class="k">def</span> <span class="nf">graph_public_for_bqs</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>
    <span class="n">current_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="n">closer_date</span> <span class="o">=</span> <span class="n">graph_start_ts</span>
    <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">bond_ids</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">BondQuant_Transposed</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="nb">id</span><span class="p">,</span> <span class="s1">&#39;Public Holdings&#39;</span><span class="p">)]</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">series</span><span class="p">[</span><span class="n">series</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">current_ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                              <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span>
                              <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Quantity of Bonds&quot;</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">current_ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">current_ax</span> <span class="o">=</span> <span class="n">ax</span>
        <span class="n">closer_date</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">closer_date</span> <span class="k">else</span> <span class="n">closer_date</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">big_numbers_format</span><span class="p">)</span>
    <span class="n">format_and_annotate_ax</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">closer_date</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">current_ax</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Taking a list of bond IDs, create a graph of their average price on the secondary market.</span>
<span class="c1">#Creates a new figure for each graph</span>
<span class="k">def</span> <span class="nf">graph_avg_price</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">axes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>
    <span class="n">current_ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
    <span class="n">closer_date</span> <span class="o">=</span> <span class="n">graph_start_ts</span>
    <span class="k">for</span> <span class="nb">id</span> <span class="ow">in</span> <span class="n">bond_ids</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">BondPrice_Transposed</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="nb">id</span><span class="p">,</span> <span class="s1">&#39;Average&#39;</span><span class="p">)]</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">series</span><span class="p">[</span><span class="n">series</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">noi</span> <span class="o">=</span> <span class="n">liberty_loans</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Warning: bond </span><span class="si">{</span><span class="n">noi</span><span class="si">}</span><span class="s2"> could not be graphed, no prices are recorded&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">current_ax</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                              <span class="n">legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span>
                              <span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Price of Bonds&quot;</span><span class="p">,</span> <span class="o">**</span><span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="s1">&#39;.&#39;</span><span class="p">})</span>
        <span class="k">if</span> <span class="n">current_ax</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> <span class="n">current_ax</span> <span class="o">=</span> <span class="n">ax</span>
        <span class="n">closer_date</span> <span class="o">=</span> <span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">closer_date</span> <span class="k">else</span> <span class="n">closer_date</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">big_dollars_format</span><span class="p">)</span>
    <span class="n">format_and_annotate_ax</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">closer_date</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">current_ax</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="st-liberty-loan-of-1917">
<h2>1st Liberty Loan of 1917<a class="headerlink" href="#st-liberty-loan-of-1917" title="Link to this heading">#</a></h2>
<p>This loan was the first bond used to fund World War I. It also featured the option to convert it so that it would have a higher coupon rate. Generally, convertible bonds are normally corporate bonds. However, in this case, when a bond is <strong>convertible</strong>, it is able to be converted into an issue with a higher coupon rate (Kang, 2015). Thus, it was converted to having a coupon rate of 4% once and 4.25% twice in 1918. This loan had 4 million subscribers, and offered 2 billion dollars while 3.035 billion dollars were subscribed, but only 2 billion dollars were accepted (Rockoff, 2012). An average of 759 dollars were subscribed (Kang, 2015).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> ipympl
<span class="n">bond_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">summarize_only_first</span><span class="p">(</span><span class="n">bond_row</span><span class="p">):</span>
    <span class="n">noi</span> <span class="o">=</span> <span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;1st Liberty Loan&quot;</span> <span class="ow">in</span> <span class="n">noi</span><span class="p">:</span>
        <span class="n">bond_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Issue L1 ID&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">20000</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">summarize_bond</span><span class="p">(</span><span class="n">bond_row</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bond_row</span>

<span class="n">liberty_loans</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">summarize_only_first</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">graph_public_for_bqs</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;First Liberty Loan(s) Public Holdings&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
<span class="n">graph_avg_price</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;First Liberty Loan(s) Secondary Market Price&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">line</span> <span class="mi">10</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>         <span class="k">return</span> <span class="n">summarize_bond</span><span class="p">(</span><span class="n">bond_row</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="k">return</span> <span class="n">bond_row</span>
<span class="ne">---&gt; </span><span class="mi">10</span> <span class="n">liberty_loans</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">summarize_only_first</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> <span class="n">graph_public_for_bqs</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;First Liberty Loan(s) Public Holdings&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Done&quot;</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;liberty_loans&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Here, it is shown that in 1917, the quantity outstanding was at 1,466,335,094, before increasing to nearly 2,000,000,000 and staying around that price before decreasing to around 1,400,000,000 in 1919, staying at around that amount before suddenly decreasing to around 189,928,800.
The increase at the beginning can be attributed to many liberty bonds being sold at that time to finance WWI. As this resulted in more citizens and households deciding to own financial assets, the decrease soon after this in late 1919 can be attributed to the increase in discount rates used to curb the increase of bond prices, resulting in depreciation of bond prices. By 1935, most of the debt had already been paid back.</p>
</section>
<section id="nd-liberty-loan">
<h2>2nd Liberty Loan<a class="headerlink" href="#nd-liberty-loan" title="Link to this heading">#</a></h2>
<p>This loan was the second bond used to fund World War I. Much like the 1st bond, it had a convertible option; however, unlike the 1st loan, it could only be converted one time, (Kang, 2015). Thus, it was converted to having a coupon rate of 4.25% once in 1918. This loan had 9.4 Million subscribers, and offered 3 billion dollars while 4.618 billion dollars were subscribed, but only 3.809 billion dollars were accepted (Rockoff, 2012). An average of 491 dollars were subscribed (Kang, 2015).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> ipympl
<span class="n">bond_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">summarize_only_first</span><span class="p">(</span><span class="n">bond_row</span><span class="p">):</span>
    <span class="n">noi</span> <span class="o">=</span> <span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;2nd Liberty Loan&quot;</span> <span class="ow">in</span> <span class="n">noi</span><span class="p">:</span>
        <span class="n">bond_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Issue L1 ID&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">20000</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">summarize_bond</span><span class="p">(</span><span class="n">bond_row</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bond_row</span>

<span class="n">liberty_loans</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">summarize_only_first</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">graph_public_for_bqs</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Second Liberty Loan(s) Public Holdings&quot;</span><span class="p">)</span>
<span class="n">graph_avg_price</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Second Liberty Loan(s) Secondary Market Price&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Bond #166: 2nd Liberty Loan of 1917 (4%), issued 1917-10-31 00:00:00
   Term: 25 years, Redeemable: 1927-11-15 00:00:00, Payable: 1942-11-15 00:00:00
   Coupon: 4.0, Frequency: 2.0/year, Scheduled Month: May
---------------------------------------------------
Bond #167: 2nd Liberty Loan Converted to 4.25%, issued 1918-11-30 00:00:00
   Term: 25 years, Redeemable: 1927-11-15 00:00:00, Payable: 1942-11-15 00:00:00
   Coupon: 4.25, Frequency: 2.0/year, Scheduled Month: May
---------------------------------------------------
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "a414a117eef94fcdba5347eac334b806", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "503154a5f94341b28fe23ac3593bbf76", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="rd-liberty-loan">
<h2>3rd Liberty Loan<a class="headerlink" href="#rd-liberty-loan" title="Link to this heading">#</a></h2>
<p>This loan was the third loan used to fund World War I. Unlike the first two loans, it didn’t have a convertible option (Kang, 2015). This loan had 18.377 million subscribers, and offered 3 billion dollars while 4.177 billion dollars were subscribed, and all 4.177 billion dollars were accepted (Rockoff, 2012). An average of 227 dollars were subscribed (Kang, 2015).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> ipympl
<span class="n">bond_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">summarize_only_first</span><span class="p">(</span><span class="n">bond_row</span><span class="p">):</span>
    <span class="n">noi</span> <span class="o">=</span> <span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;3rd Liberty Loan&quot;</span> <span class="ow">in</span> <span class="n">noi</span><span class="p">:</span>
        <span class="n">bond_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Issue L1 ID&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">20000</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">summarize_bond</span><span class="p">(</span><span class="n">bond_row</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bond_row</span>

<span class="n">liberty_loans</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">summarize_only_first</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">graph_public_for_bqs</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Third Liberty Loan(s) Public Holdings&quot;</span><span class="p">)</span>
<span class="n">graph_avg_price</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Third Liberty Loan(s) Secondary Market Price&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Bond #168: 3rd Liberty Loan, issued 1918-05-31 00:00:00
   Term: 10 years, Redeemable: NaT, Payable: 1928-09-15 00:00:00
   Coupon: 4.25, Frequency: 2.0/year, Scheduled Month: March
---------------------------------------------------
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "f0a2f148df5a427bab2eb9c02dd5962a", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "70f273337e2c4e03b3cdea6b9988a78c", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="th-liberty-loan">
<h2>4th Liberty Loan<a class="headerlink" href="#th-liberty-loan" title="Link to this heading">#</a></h2>
<p>This loan was the fourth loan used to fund World War I. Like the third loan, it didn’t have a convertible option (Kang, 2015). This loan had 22.778 Million subscribers, and offered 6 billion dollars while 6.959 billion dollars were subscribed, and all 6.959 billion dollars were accepted (Rockoff, 2012). An average of 306 dollars were subscribed (Kang, 2015).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> ipympl
<span class="n">bond_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">summarize_only_first</span><span class="p">(</span><span class="n">bond_row</span><span class="p">):</span>
    <span class="n">noi</span> <span class="o">=</span> <span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;4th Liberty Loan&quot;</span> <span class="ow">in</span> <span class="n">noi</span><span class="p">:</span>
        <span class="n">bond_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Issue L1 ID&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">20000</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">summarize_bond</span><span class="p">(</span><span class="n">bond_row</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bond_row</span>

<span class="n">liberty_loans</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">summarize_only_first</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">graph_public_for_bqs</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Fourth Liberty Loan(s) Public Holdings&quot;</span><span class="p">)</span>
<span class="n">graph_avg_price</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Fourth Liberty Loan(s) Secondary Market Price&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Bond #169: 4th Liberty Loan, issued 1918-09-30 00:00:00
   Term: 20 years, Redeemable: 1933-10-15 00:00:00, Payable: 1938-10-15 00:00:00
   Coupon: 4.25, Frequency: 2.0/year, Scheduled Month: April
---------------------------------------------------
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "5f8497c6d11845998bdf1db777dc2750", "version_major": 2, "version_minor": 0}</script><script type="application/vnd.jupyter.widget-view+json">{"model_id": "7b76f8405670488c983eaf0a5597b10b", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="victory-loans">
<h2>Victory Loans<a class="headerlink" href="#victory-loans" title="Link to this heading">#</a></h2>
<p>These were victory loans used after WWI. This differs from the other bonds as they were issued after WWI rather than during it. Like the third and fourth loans, they didn’t have convertible options (Kang, 2015). These loans had 11.803 million subscribers, and offered 4.5 billion dollars while 5.25 billion dollars were subscribed, and only 4.5 billion dollars were accepted (Rockoff, 2012). An average of 445 dollars were subscribed (Kang, 2015).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> ipympl
<span class="n">bond_ids</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">def</span> <span class="nf">summarize_only_first</span><span class="p">(</span><span class="n">bond_row</span><span class="p">):</span>
    <span class="n">noi</span> <span class="o">=</span> <span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;Victory Liberty Loan&quot;</span> <span class="ow">in</span> <span class="n">noi</span> <span class="ow">or</span> <span class="s2">&quot;Vic Lib Loan&quot;</span> <span class="ow">in</span> <span class="n">noi</span><span class="p">:</span>
        <span class="n">bond_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bond_row</span><span class="p">[</span><span class="s2">&quot;Issue L1 ID&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">20000</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">summarize_bond</span><span class="p">(</span><span class="n">bond_row</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bond_row</span>

<span class="n">liberty_loans</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">summarize_only_first</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">graph_public_for_bqs</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Victory Loan(s) Public Holdings&quot;</span><span class="p">)</span>
<span class="n">graph_avg_price</span><span class="p">(</span><span class="n">bond_ids</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Victory Loan(s) Secondary Market Price&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Bond #170: Victory Liberty Loan (4 3/4%), issued 1919-05-20 00:00:00
   Term: 4 years, Redeemable: 1922-06-15 00:00:00, Payable: 1923-05-20 00:00:00
   Coupon: 4.75, Frequency: 2.0/year, Scheduled Month: June
---------------------------------------------------
Bond #171: Victory Liberty Loan (3 3/4%), issued 1919-05-20 00:00:00
   Term: 4 years, Redeemable: 1922-12-15 00:00:00, Payable: 1923-05-20 00:00:00
   Coupon: 3.75, Frequency: 2.0/year, Scheduled Month: June
---------------------------------------------------
Bond #176: Vic Lib Loan 4.75s, called, issued 1919-05-20 00:00:00
   No further information
Bond #177: Vic Lib Loan 4.75s, 1922-23, issued 1919-05-20 00:00:00
   No further information
Bond #178: Vic Lib Loan 4.75 of 1922-1923 and 3.75 of 1922-1923, issued 1919-05-20 00:00:00
   No further information
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "7ae4112d128c4021b5bf315827e708f3", "version_major": 2, "version_minor": 0}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning: bond Vic Lib Loan 4.75 of 1922-1923 and 3.75 of 1922-1923 could not be graphed, no prices are recorded
</pre></div>
</div>
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "bd795d0a19fe49418732ae064cb7fef9", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="price-drop-in-1920-1921">
<h2>Price Drop in 1920-1921<a class="headerlink" href="#price-drop-in-1920-1921" title="Link to this heading">#</a></h2>
<p>As seen with the Secondary Market Price graphs of the Liberty and Victory Loans, there was a big drop in bond prices from 1920-1921 for all of these loans. This can be attributed to the Depression of 1920-1921. During this period, unemployment rates rose to 12%, and prices saw a 15% rise (“In,” 2021). Overall, the economy suffered a large recession. Consequently, the US government lost a significant amount of credibility, meaning higher yields and lower prices for the bonds were demanded. However, the US quickly recovered from this in 1922, meaning the government was able to gain credit back. Thus, yield demand wasn’t as high, and prices as a result rose back up again.</p>
<section id="events-potentially-leading-to-price-drop">
<h3>Events potentially leading to price drop:<a class="headerlink" href="#events-potentially-leading-to-price-drop" title="Link to this heading">#</a></h3>
<p>Initially, when the US came out of WWI, the economy was expanding largely: unemployment decreased to 1.4% while productivity &amp; inflation both increased (“In,” 2021). However, the Federal Reserve, in order to finance military operations, was trying to keep interest rates low (as this would decrease coupon rates), thus “inflation increased unchecked, to the growing consternation of policy advisors” (“In,” 2021). Due to reforms initiated to decrease inflation, which included a government spending cut by 75% and an increase of the discount rate, a recession ensued (“In,” 2021).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Interactive graph: select a bond by its name, and select the checkboxes to show</span>
<span class="c1">#their price and/or quantity history</span>
<span class="c1">#Use check marks to show/unshow wartime and 1920-21 depression patches (red and purple respectively)</span>
<span class="o">%</span><span class="k">matplotlib</span> ipympl

<span class="n">plt</span><span class="o">.</span><span class="n">ioff</span><span class="p">()</span>

<span class="n">war_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ed7784&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;US time in WW1&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
<span class="n">depression_patch</span> <span class="o">=</span> <span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ad2df7&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Depression&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
<span class="n">possible_colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;aqua&quot;</span><span class="p">,</span> <span class="s2">&quot;aquamarine&quot;</span><span class="p">,</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;brown&quot;</span><span class="p">,</span> <span class="s2">&quot;crimson&quot;</span><span class="p">,</span> <span class="s2">&quot;darkblue&quot;</span><span class="p">,</span> <span class="s2">&quot;darkgreen&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="s2">&quot;indigo&quot;</span><span class="p">,</span> <span class="s2">&quot;maroon&quot;</span><span class="p">,</span> <span class="s2">&quot;navy&quot;</span><span class="p">,</span> <span class="s2">&quot;orangered&quot;</span><span class="p">,</span> <span class="s2">&quot;purple&quot;</span><span class="p">,</span> <span class="s2">&quot;teal&quot;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">bond_name_to_id</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">liberty_loans</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">liberty_loans</span><span class="p">[</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">id_to_bond_name</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">liberty_loans</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="s2">&quot;Treasury&#39;s Name Of Issue&quot;</span><span class="p">]</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">num</span><span class="o">=</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10000</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">header_visible</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">big_numbers_format</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Time&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Quantity&quot;</span><span class="p">)</span>
<span class="n">twinx</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">twinx</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="p">[</span><span class="n">war_patch</span><span class="p">,</span> <span class="n">depression_patch</span><span class="p">],</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mf">0.2</span><span class="p">),</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Events&quot;</span><span class="p">)</span>
<span class="n">twinx</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">big_dollars_format</span><span class="p">)</span>
<span class="n">twinx</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Price&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

<span class="n">initial_options</span> <span class="o">=</span> <span class="p">[</span><span class="n">id_to_bond_name</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">liberty_loans</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
<span class="n">name_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
    <span class="n">options</span><span class="o">=</span><span class="n">initial_options</span><span class="p">,</span>
    <span class="n">value</span><span class="o">=</span><span class="n">initial_options</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Name:&quot;</span><span class="p">)</span>
<span class="n">show_quant_checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Show Quantity&quot;</span><span class="p">)</span>
<span class="n">show_price_checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Show Price&quot;</span><span class="p">)</span>
<span class="n">show_wartime_checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Show Wartime&quot;</span><span class="p">)</span>
<span class="n">show_wartime_checkbox</span><span class="o">.</span><span class="n">style</span>
<span class="n">show_depression_checkbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Show Depression&quot;</span><span class="p">)</span>
<span class="n">legend_textbox</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>

<span class="n">current_depression_polygon</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">current_war_polygon</span> <span class="o">=</span> <span class="kc">None</span>

<span class="n">shown_price_names_and_lines</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">shown_quant_names_and_lines</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">used_colors</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">using_dropdown_lock</span> <span class="o">=</span> <span class="kc">False</span>

<span class="c1">#Gets a random color that is not already being used</span>
<span class="k">def</span> <span class="nf">_get_available_color</span><span class="p">():</span>
    <span class="n">available</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">possible_colors</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">color</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">used_colors</span><span class="p">:</span> <span class="n">available</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">available</span><span class="p">)</span>
    <span class="n">used_colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">color</span>

<span class="c1">#Plots a series, handles NaN values</span>
<span class="k">def</span> <span class="nf">_plot_line</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">series</span><span class="p">,</span> <span class="n">marker</span><span class="p">):</span>
    <span class="n">series</span> <span class="o">=</span> <span class="n">series</span><span class="p">[</span><span class="n">series</span><span class="o">.</span><span class="n">notna</span><span class="p">()]</span>
    <span class="n">random_color</span> <span class="o">=</span> <span class="n">_get_available_color</span><span class="p">()</span>
    <span class="n">line2d</span><span class="p">,</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
            <span class="p">[</span><span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">to_pydatetime</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">))],</span>
            <span class="p">[</span><span class="n">series</span><span class="o">.</span><span class="n">loc</span><span class="p">[:][</span><span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">index</span><span class="p">))],</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">random_color</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">line2d</span>

<span class="c1">#The legend is an HTML element with a &lt;table&gt; in it</span>
<span class="k">def</span> <span class="nf">_update_legend</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">legend_textbox</span>
    <span class="n">strs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">strs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&quot;</span><span class="p">)</span>
    <span class="n">strs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;tr&gt;&lt;th&gt;Bond name&lt;/th&gt;&lt;th&gt;Color&lt;/th&gt;&lt;/tr&gt;&quot;</span><span class="p">)</span>
    <span class="n">lines</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">shown_price_names_and_lines</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">shown_quant_names_and_lines</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">line2d</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
        <span class="n">strs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&lt;tr style=&quot;color: </span><span class="si">{</span><span class="n">line2d</span><span class="o">.</span><span class="n">get_color</span><span class="p">()</span><span class="si">}</span><span class="s1">&quot;&gt;&lt;td&gt;</span><span class="si">{</span><span class="n">line2d</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span><span class="si">}</span><span class="s1">&lt;/td&gt;&lt;td&gt;</span><span class="si">{</span><span class="n">line2d</span><span class="o">.</span><span class="n">get_color</span><span class="p">()</span><span class="si">}</span><span class="s1">&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="p">)</span>
    <span class="n">strs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;/table&gt;&lt;/tbody&gt;&quot;</span><span class="p">)</span>
    <span class="n">legend_textbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">strs</span><span class="p">)</span>

<span class="c1">#Plot a bond, quantity or price</span>
<span class="k">def</span> <span class="nf">add_bond</span><span class="p">(</span><span class="n">bond_name</span><span class="p">,</span> <span class="n">quant</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">twinx</span>
    <span class="n">bond_id</span> <span class="o">=</span> <span class="n">bond_name_to_id</span><span class="p">(</span><span class="n">bond_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">quant</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">BondQuant_Transposed</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bond_id</span><span class="p">,</span> <span class="s1">&#39;Public Holdings&#39;</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">series</span> <span class="o">=</span> <span class="n">BondPrice_Transposed</span><span class="o">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">bond_id</span><span class="p">,</span> <span class="s1">&#39;Average&#39;</span><span class="p">)]</span>
    <span class="n">line2d</span> <span class="o">=</span> <span class="n">_plot_line</span><span class="p">((</span><span class="n">ax</span> <span class="k">if</span> <span class="n">quant</span> <span class="k">else</span> <span class="n">twinx</span><span class="p">),</span> <span class="n">bond_name</span> <span class="o">+</span> <span class="p">(</span><span class="s2">&quot; (Quantity)&quot;</span> <span class="k">if</span> <span class="n">quant</span> <span class="k">else</span> <span class="s2">&quot; (Price)&quot;</span><span class="p">),</span> <span class="n">series</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;^&quot;</span> <span class="k">if</span> <span class="n">quant</span> <span class="k">else</span> <span class="s2">&quot;.&quot;</span><span class="p">)</span>
    <span class="p">(</span><span class="n">shown_quant_names_and_lines</span> <span class="k">if</span> <span class="n">quant</span> <span class="k">else</span> <span class="n">shown_price_names_and_lines</span><span class="p">)[</span><span class="n">bond_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">line2d</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">flush_events</span><span class="p">()</span>

<span class="c1">#Remove the plot of a bond, quantity or price</span>
<span class="k">def</span> <span class="nf">remove_bond</span><span class="p">(</span><span class="n">bond_name</span><span class="p">,</span> <span class="n">quant</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">fig</span>
    <span class="n">names_and_lines</span> <span class="o">=</span> <span class="n">shown_quant_names_and_lines</span> <span class="k">if</span> <span class="n">quant</span> <span class="k">else</span> <span class="n">shown_price_names_and_lines</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">names_and_lines</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">get_label</span><span class="p">()</span> <span class="o">==</span> <span class="n">bond_name</span><span class="p">:</span>
            <span class="n">used_colors</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
            <span class="n">line</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="n">ref2</span> <span class="o">=</span> <span class="n">names_and_lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">ref2</span>
            <span class="k">del</span> <span class="n">line</span>
            <span class="k">break</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">flush_events</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">bond_name_dropdown_handler</span><span class="p">(</span><span class="n">unused_arg</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">using_dropdown_lock</span>
    <span class="n">using_dropdown_lock</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name_dropdown</span><span class="o">.</span><span class="n">value</span>
    <span class="n">show_price_checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">shown_price_names_and_lines</span>
    <span class="n">show_quant_checkbox</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">shown_quant_names_and_lines</span>
    <span class="n">using_dropdown_lock</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">def</span> <span class="nf">quant_checkbox_handler</span><span class="p">(</span><span class="n">unused_arg</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">using_dropdown_lock</span><span class="p">:</span> <span class="k">return</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name_dropdown</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">show_quant_checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">add_bond</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">remove_bond</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">_update_legend</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">price_checkbox_handler</span><span class="p">(</span><span class="n">unused_arg</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">using_dropdown_lock</span><span class="p">:</span> <span class="k">return</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name_dropdown</span><span class="o">.</span><span class="n">value</span>
    <span class="k">if</span> <span class="n">show_price_checkbox</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="n">add_bond</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">remove_bond</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
    <span class="n">_update_legend</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">wartime_checkbox_handler</span><span class="p">(</span><span class="n">unused_arg</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">current_war_polygon</span>
    <span class="k">if</span> <span class="n">current_war_polygon</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">current_war_polygon</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">xmin</span><span class="o">=</span><span class="n">join_ts</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">armistice_ts</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ed7784&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">current_war_polygon</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">current_war_polygon</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">flush_events</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">depression_checkbox_handler</span><span class="p">(</span><span class="n">unused_arg</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">current_depression_polygon</span>
    <span class="k">if</span> <span class="n">current_depression_polygon</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">current_depression_polygon</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">xmin</span><span class="o">=</span><span class="n">depression_begin_ts</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="n">depression_end_ts</span><span class="p">,</span> <span class="n">fc</span><span class="o">=</span><span class="s2">&quot;#ad2df7&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.65</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">current_depression_polygon</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="n">current_depression_polygon</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">flush_events</span><span class="p">()</span>

<span class="n">name_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">bond_name_dropdown_handler</span><span class="p">)</span>
<span class="n">show_quant_checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">quant_checkbox_handler</span><span class="p">)</span>
<span class="n">show_price_checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">price_checkbox_handler</span><span class="p">)</span>
<span class="n">show_wartime_checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">wartime_checkbox_handler</span><span class="p">)</span>
<span class="n">show_depression_checkbox</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">depression_checkbox_handler</span><span class="p">)</span>
<span class="n">wartime_checkbox_handler</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">depression_checkbox_handler</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">AppLayout</span><span class="p">(</span>
    <span class="n">header</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">name_dropdown</span><span class="p">,</span> <span class="n">show_quant_checkbox</span><span class="p">,</span> <span class="n">show_price_checkbox</span><span class="p">]),</span>
    <span class="n">center</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="p">,</span> <span class="n">legend_textbox</span><span class="p">]),</span>
    <span class="n">footer</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">show_wartime_checkbox</span><span class="p">,</span> <span class="n">show_depression_checkbox</span><span class="p">]),</span>
    <span class="n">merge</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">pane_heights</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;30px&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="s2">&quot;30px&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">app</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="supplementary-materials">
<h1>Supplementary Materials<a class="headerlink" href="#supplementary-materials" title="Link to this heading">#</a></h1>
<section id="figures">
<h2>Figures<a class="headerlink" href="#figures" title="Link to this heading">#</a></h2>
<p>Each bond has one cell dedicated to it. This cell outputs three items: a worded summary of the features of each bond, a graph of its quantity over time, and a graph of its price on the secondary market over time. Note that many bonds have differing options for interest rates (the convertible bonds), which is why most worded summaries and figures will show different bond entries for the same bond name.</p>
</section>
<section id="dataframe-format-notes">
<h2>Dataframe format notes<a class="headerlink" href="#dataframe-format-notes" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>A PDF ReadMe for the dataframe is available on github <a class="reference external" href="https://github.com/jepayne/US-Federal-Debt-Public/blob/master/Industrial-Suite/Documentation/ReadMe_Pub_20180910.pdf">here</a></p></li>
<li><p>The order in which the categories are listed is not necessarily the same; some are switched to make the list read more logically</p></li>
</ul>
<section id="bondlist">
<h3>BondList<a class="headerlink" href="#bondlist" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Import id is not used</p></li>
<li><p>Category L* describes the category in level L*</p></li>
<li><p>Category L* ID is the numeric ID of the above</p></li>
<li><p>Issue IDs are the numeric ID of a bond within its category</p></li>
<li><p>L* ID is the bond’s ID within level L* (therefore, L1 ID is the unique id for each bond because it is the highest category, so it is the index)</p></li>
<li><p>Very few of the Authorizing Act Date entries are actually in the raw data, they may need imputing from the Authorizing Act string - for now, if we need an “issuance date” of the security, we use the “First Issue Date” column</p></li>
</ul>
</section>
<section id="bondquant-and-bondprice">
<h3>BondQuant and BondPrice<a class="headerlink" href="#bondquant-and-bondprice" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>By default, the rows are months and the columns are numbers for these dataframes; I find it easier to work with them transposed</p></li>
<li><p>Always use <code class="docutils literal notranslate"><span class="pre">series</span> <span class="pre">=</span> <span class="pre">series[series.notna()]</span></code> to filter NaN values reliably</p></li>
</ul>
</section>
</section>
<section id="works-cited">
<h2>Works Cited:<a class="headerlink" href="#works-cited" title="Link to this heading">#</a></h2>
<p>In the Shadow of the Slump: The Depression of 1920-1921. (2021, March 18). Berkley Economic Review. <a class="reference external" href="https://econreview.studentorg.berkeley.edu/in-the-shadow-of-the-slump-the-depression-of-1920-1921/">https://econreview.studentorg.berkeley.edu/in-the-shadow-of-the-slump-the-depression-of-1920-1921/</a></p>
<p>Kang, S. W., &amp; Rockoff, H. (2015). Capitalizing patriotism: the Liberty loans of World War I. Financial History Review, 22(1), 45–78. doi:10.1017/S0968565015000037</p>
<p>Rockoff, Hugh. (2012). Chapter 5 - World War I. <em>America’s Economic Way of War: War and the US economy from the Spanish-american war to the first Gulf war.</em> (pp. 99-154). Cambridge University Press.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="BondBios%20-%20The%20Currency%20Sixes.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Bond Biography: The Currency Sixes</p>
      </div>
    </a>
    <a class="right-next"
       href="5-20s%20bonds%20%281%29.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Bond List</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Bond Bio: The Liberty and Victory Loans issued to fund WW1</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#questions-that-will-be-answered-for-each-bond">Questions that will be answered for each bond:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#liberty-victory-loans">Liberty &amp; Victory Loans</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#st-liberty-loan-of-1917">1st Liberty Loan of 1917</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nd-liberty-loan">2nd Liberty Loan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rd-liberty-loan">3rd Liberty Loan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#th-liberty-loan">4th Liberty Loan</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#victory-loans">Victory Loans</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#price-drop-in-1920-1921">Price Drop in 1920-1921</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#events-potentially-leading-to-price-drop">Events potentially leading to price drop:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#supplementary-materials">Supplementary Materials</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#figures">Figures</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe-format-notes">Dataframe format notes</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bondlist">BondList</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bondquant-and-bondprice">BondQuant and BondPrice</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#works-cited">Works Cited:</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>